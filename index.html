<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HPOS — Human Potential Operating System</title>
    <style>
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
            color: #e0e0e0;
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        /* Glassmorphism Elements */
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .glass::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        }

        /* Screens */
        .screen {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Title */
        .title {
            text-align: center;
            font-size: 1.8em;
            margin-bottom: 40px;
            color: #ffffff;
            letter-spacing: 1px;
        }

        /* Buttons */
        .btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #e0e0e0;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            width: 100%;
            margin: 10px 0;
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        /* Options */
        .option {
            margin: 15px 0;
        }

        .option label {
            display: block;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            transition: background 0.3s ease;
        }

        .option label:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .option input[type="radio"] {
            margin-right: 10px;
        }

        /* Question */
        .question {
            font-size: 1.1em;
            margin-bottom: 20px;
            text-align: center;
        }

        .ai-response {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            font-style: italic;
        }

        /* Mirror Insights */
        .insight {
            margin: 15px 0;
            padding: 10px;
            background: rgba(255, 255, 255, 0.03);
            border-left: 3px solid rgba(255, 255, 255, 0.3);
        }

        /* Progress */
        .progress {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: rgba(255, 255, 255, 0.3);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Mobile Responsiveness */
        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }

            .glass {
                padding: 20px;
            }

            .title {
                font-size: 1.5em;
            }
        }

        /* Subtle Motion */
        .glass {
            animation: subtleFloat 6s ease-in-out infinite;
        }

        @keyframes subtleFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Screen 1: Entry & Thinking Mode -->
        <div id="screen-entry" class="screen active">
            <div class="glass">
                <h1 class="title">HPOS</h1>
                <p style="text-align: center; margin-bottom: 30px; opacity: 0.8;">Human Potential Operating System</p>
                <div class="question">How do you process life?</div>
                <div class="option">
                    <label><input type="radio" name="thinking-mode" value="logic"> LOGIC (structure, systems)</label>
                </div>
                <div class="option">
                    <label><input type="radio" name="thinking-mode" value="intuition"> INTUITION (emotion, meaning)</label>
                </div>
                <div class="option">
                    <label><input type="radio" name="thinking-mode" value="execution"> EXECUTION (action, trial)</label>
                </div>
                <button class="btn" onclick="startHPOS()">Begin</button>
            </div>
        </div>

        <!-- Screen 2: Philosophical Questions -->
        <div id="screen-questions" class="screen">
            <div class="glass">
                <h1 class="title">Reflecting</h1>
                <div id="question-container"></div>
                <div class="progress">
                    <div id="progress-bar" class="progress-bar"></div>
                </div>
                <button class="btn" id="next-question" onclick="nextQuestion()" style="display: none;">Next</button>
                <button class="btn" id="finish-questions" onclick="finishQuestions()" style="display: none;">Finish Reflection</button>
            </div>
        </div>

        <!-- Screen 3: Mirror Screen -->
        <div id="screen-mirror" class="screen">
            <div class="glass">
                <h1 class="title">What I See</h1>
                <div class="ai-response" id="mirror-insights"></div>
                <button class="btn" onclick="confirmMirror(true)">Yes, this resonates</button>
                <button class="btn" onclick="confirmMirror(false)">No, adjust</button>
            </div>
        </div>

        <!-- Screen 4: Problem Assignment -->
        <div id="screen-problems" class="screen">
            <div class="glass">
                <h1 class="title">The Problem</h1>
                <div id="problem-list"></div>
                <button class="btn" id="select-problem-btn" onclick="selectProblem()" style="display: none;">Select and Proceed</button>
            </div>
        </div>

        <!-- Screen 5: Execution Plan -->
        <div id="screen-execution" class="screen">
            <div class="glass">
                <h1 class="title">Execution</h1>
                <div id="execution-plan"></div>
                <div class="progress">
                    <div id="week-progress" class="progress-bar"></div>
                </div>
                <button class="btn" onclick="nextWeek()">Next Week</button>
                <button class="btn" onclick="completeGoal()">Goal Reached</button>
                <button class="btn" onclick="continueToChatGPT()">Continue with AI Companion</button>
            </div>
        </div>

        <!-- Screen 6: Completion -->
        <div id="screen-completion" class="screen">
            <div class="glass">
                <h1 class="title">HPOS Initialized</h1>
                <p style="text-align: center;">Opening continuation in ChatGPT...</p>
            </div>
        </div>
    </div>

    <script>
        // Memory System using localStorage
        const MEMORY_KEY = 'hpos_data';
        let hposData = JSON.parse(localStorage.getItem(MEMORY_KEY)) || {
            thinkingMode: null,
            answers: [],
            cognitiveModel: {
                depthVsSpeed: 0.5,
                actionVsReflection: 0.5,
                avoidance: 0.5,
                structureTolerance: 0.5,
                curiosity: 0.5,
                emotionalInfluence: 0.5,
                validationDependency: 0.5
            },
            mirrorConfirmed: false,
            selectedProblem: null,
            currentWeek: 0,
            weeks: 4
        };

        // Questions Engine
        const questions = [
            "Imagine you're planning a trip. Do you research every detail or go with the flow?",
            "When faced with a tough decision at work, do you list pros and cons or trust your gut?",
            "How do you feel about routines? Comforting or confining?",
            "In a group project, do you prefer leading with ideas or executing tasks?",
            "What drains you more: repetitive tasks or ambiguous goals?",
            "Do you enjoy deep conversations or quick exchanges?",
            "When learning something new, do you apply it immediately or study more?",
            "How do you handle failure? Analyze it deeply or move on quickly?",
            "Do emotions influence your choices a lot or minimally?",
            "Do you seek feedback often or rely on self-assessment?"
        ];

        let currentQuestionIndex = 0;
        let userAnswers = [];

        // Problems based on cognitive model
        function generateProblems(cognitiveModel) {
            const problems = [];
            if (cognitiveModel.actionVsReflection < 0.4) {
                problems.push({
                    id: 'overthinking',
                    title: 'Overthinking before action',
                    why: 'You seem to prefer reflection and depth, which can lead to hesitation when clarity feels incomplete.',
                    daily: 'This appears in daily life as delays in starting tasks or projects.'
                });
            }
            if (cognitiveModel.depthVsSpeed > 0.6) {
                problems.push({
                    id: 'tooManyIdeas',
                    title: 'Too many ideas, no execution',
                    why: 'Your curiosity and depth lead to exploring many paths without committing.',
                    daily: 'This shows up as unfinished projects or scattered focus.'
                });
            }
            if (cognitiveModel.structureTolerance < 0.4) {
                problems.push({
                    id: 'disciplineWithoutMeaning',
                    title: 'Discipline without meaning',
                    why: 'You value intuition and emotion, making rigid structures feel draining.',
                    daily: 'This manifests as burnout from tasks that lack personal significance.'
                });
            }
            if (cognitiveModel.avoidance > 0.6) {
                problems.push({
                    id: 'learningWithoutApplication',
                    title: 'Learning without application',
                    why: 'High avoidance and reflection lead to knowledge accumulation without use.',
                    daily: 'You gather information but rarely test it in real scenarios.'
                });
            }
            if (problems.length === 0) {
                problems.push({
                    id: 'skillWithoutDirection',
                    title: 'Skill without direction',
                    why: 'Balanced traits suggest skills are built but not aligned with clear purpose.',
                    daily: 'This appears as proficiency in areas without overall progress.'
                });
            }
            return problems.slice(0, 2); // 1-2 problems
        }

        // AI Personality Engine - Generates responses
        function generateAIResponse(type, data) {
            const responses = {
                observer: "I'm noticing patterns in your responses. No rush to conclusions yet.",
                reflector: "This isn't random. A direction is forming based on what you've shared.",
                guide: "Based on this, let's align it with real-world steps.",
                challenger: "This pattern might be holding you back—respectfully, let's examine it."
            };
            // Simulate state based on progress
            let state = 'observer';
            if (currentQuestionIndex > 5) state = 'reflector';
            if (hposData.mirrorConfirmed) state = 'guide';
            return responses[state];
        }

        // Update Cognitive Model based on answer
        function updateCognitiveModel(answer) {
            const dimensions = Object.keys(hposData.cognitiveModel);
            dimensions.forEach(dim => {
                // Simulate slight adjustments based on answer (0-1 scale, text input simulated as number)
                const adjustment = (Math.random() - 0.5) * 0.1 + (answer.length % 2 === 0 ? 0.05 : -0.05);
                hposData.cognitiveModel[dim] = Math.max(0, Math.min(1, hposData.cognitiveModel[dim] + adjustment));
            });
        }

        // Screen Navigation
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }

        // Entry Mode
        function startHPOS() {
            const selected = document.querySelector('input[name="thinking-mode"]:checked');
            if (!selected) return alert('Please select a mode.');
            hposData.thinkingMode = selected.value;
            saveData();
            showScreen('screen-questions');
            nextQuestion();
        }

        // Questions Engine
        function nextQuestion() {
            if (currentQuestionIndex < questions.length) {
                document.getElementById('question-container').innerHTML = `
                    <div class="question">${questions[currentQuestionIndex]}</div>
                    <textarea id="answer" placeholder="Your thoughts..." style="width: 100%; padding: 10px; border-radius: 8px; background: rgba(0,0,0,0.3); color: #e0e0e0; border: 1px solid rgba(255,255,255,0.2);"></textarea>
                    <div class="ai-response">${generateAIResponse()}</div>
                `;
                document.getElementById('next-question').style.display = 'block';
                document.getElementById('finish-questions').style.display = 'none';
                currentQuestionIndex++;
            } else {
                // All questions done? No, loop until 10, but for demo, after 5 go to mirror
                if (hposData.answers.length >= 5) {
                    showScreen('screen-mirror');
                }
            }
        }

        function finishQuestions() {
            // Actually, questions are answered via next
            // This is for after all
            showScreen('screen-mirror');
        }

        // In nextQuestion, after input
        // Wait, adjust: nextQuestion shows, but on click next, capture answer
        window.nextQuestion = function() { // Override for capture
            const answer = document.getElementById('answer').value;
            if (answer.trim()) {
                hposData.answers.push(answer);
                updateCognitiveModel(answer);
                saveData();
                document.getElementById('progress-bar').style.width = ((hposData.answers.length / 10) * 100) + '%';
            }
            if (hposData.answers.length < 10) {
                nextQuestion(); // Recursive call to show next
            } else {
                document.getElementById('finish-questions').style.display = 'block';
                document.getElementById('next-question').style.display = 'none';
            }
        };

        // Mirror Screen
        function showMirror() {
            const model = hposData.cognitiveModel;
            let insights = [];
            if (model.actionVsReflection < 0.4) insights.push('You prefer understanding before acting.');
            if (model.depthVsSpeed > 0.6) insights.push('You enjoy depth over speed in explorations.');
            if (model.avoidance > 0.6) insights.push('You hesitate when clarity feels incomplete.');
            if (model.structureTolerance > 0.6) insights.push('You rely on structure to stay grounded.');
            // Add more based on model
            if (insights.length === 0) insights.push('A balanced approach, with room for alignment in action and reflection.');

            document.getElementById('mirror-insights').innerHTML = `
                <p>I'm pausing here to reflect what I've observed so far.</p>
                \( {insights.map(i => `<div class="insight"> \){i}</div>`).join('')}
                <p>Does this feel accurate?</p>
            `;
        }

        function confirmMirror(resonates) {
            if (resonates) {
                hposData.mirrorConfirmed = true;
                saveData();
                showScreen('screen-problems');
                showProblems();
            } else {
                // Adapt: ask more questions
                currentQuestionIndex = hposData.answers.length;
                showScreen('screen-questions');
                nextQuestion();
            }
        }

        // Problem Assignment
        function showProblems() {
            const problems = generateProblems(hposData.cognitiveModel);
            let html = '<p>Based on our reflection, here are problems that seem to fit. Select one to focus on deeply.</p>';
            problems.forEach((p, i) => {
                html += `
                    <div class="option">
                        <label>
                            <input type="radio" name="problem" value="${i}" onchange="document.getElementById('select-problem-btn').style.display='block';">
                            <strong>${p.title}</strong><br>
                            <small>Why it fits: ${p.why}</small><br>
                            <small>How it appears: ${p.daily}</small>
                        </label>
                    </div>
                `;
            });
            document.getElementById('problem-list').innerHTML = html;
        }

        function selectProblem() {
            const selected = document.querySelector('input[name="problem"]:checked');
            if (!selected) return alert('Please select a problem.');
            const problems = generateProblems(hposData.cognitiveModel);
            hposData.selectedProblem = problems[parseInt(selected.value)];
            saveData();
            showScreen('screen-execution');
            showExecutionPlan();
        }

        // Execution Engine
        function showExecutionPlan() {
            const problem = hposData.selectedProblem;
            let plan = `
                <p><strong>Problem:</strong> ${problem.title}</p>
                <p><strong>Why it fits:</strong> ${problem.why}</p>
                <div id="weekly-plan">
                    <h3>4-Week Execution Cycle</h3>
                    <div id="current-week-plan"></div>
                </div>
            `;
            document.getElementById('execution-plan').innerHTML = plan;
            updateWeekDisplay();
        }

        function updateWeekDisplay() {
            const weeks = [
                { title: 'Week 1: Observe', desc: 'Track how this problem shows up in your daily life without changing anything.' },
                { title: 'Week 2: Change one thing', desc: 'Pick one small action to address it. Implement and note effects.' },
                { title: 'Wee


